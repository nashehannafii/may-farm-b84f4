---
import { Tick } from "@components/ui/icons";
import Link from "@components/ui/link.astro";

const { plan } = Astro.props;
---

<div class="rounded-xl p-8 xl:p-10 ring-1 ring-gray-200 dark:bg-stone-950 dark:ring-gray-700 w-full max-w-lg mx-auto shadow-lg hover:shadow-xl transition-shadow duration-300">
    <div class="flex items-center justify-between gap-x-4 mb-2">
        <h3 id="tier-{plan.name.toLowerCase().replace(/\s+/g, '-')}" class="text-xl font-bold leading-8 text-gray-900 dark:text-white">
            {plan.name}
        </h3>
        {plan.popular && (
            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                Terlaris
            </span>
        )}
    </div>
    
    <!-- Gambar responsif di bawah h3 -->
    <div class="mt-4 rounded-xl overflow-hidden w-full border border-gray-200 dark:border-gray-700">
        <img 
            src={plan.image || `https://picsum.photos/seed/${plan.name.replace(/\s+/g, '')}/700/400`} 
            alt={plan.name} 
            class="w-full h-52 lg:h-60 object-cover transition-transform duration-300 hover:scale-105"
            loading="lazy"
            onerror="this.src='https://picsum.photos/700/400?grayscale'"
        />
    </div>
    
    <div class="mt-6 flex items-baseline gap-x-2">
        <span class="text-4xl font-bold tracking-tight text-gray-900 dark:text-white">
            {plan.price && typeof plan.price === "object" ? plan.price.monthly : plan.price}
        </span>
        {plan.pricePeriod && (
            <span class="text-sm font-semibold leading-6 text-gray-600 dark:text-gray-300">/{plan.pricePeriod}</span>
        )}
        {plan.price && typeof plan.price === "object" && plan.price.discount && (
            <span class="ml-2 text-sm line-through text-gray-400 dark:text-gray-500">{plan.price.original}</span>
        )}
    </div>
    
    <Link 
        href={plan.button.link || "#"} 
        aria-describedby={`tier-${plan.name.toLowerCase().replace(/\s+/g, '-')}`} 
        style="outline" 
        class="block w-full mt-6 text-center py-3 px-6 rounded-lg bg-green-600 hover:bg-green-700 text-white font-medium transition-colors duration-200"
    >
        {plan.button.text || "Pesan Sekarang"}
    </Link>
    
    <ul role="list" class="mt-8 space-y-4 text-sm leading-6 text-gray-600 dark:text-gray-300">
        {
            plan.features.map((item) => (
                <li class="flex gap-x-3 items-start">
                    <svg class="h-6 w-5 flex-none text-green-500 mt-0.5 shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path
                            fill-rule="evenodd"
                            d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                            clip-rule="evenodd"
                        />
                    </svg>
                    <span class="flex-1 text-gray-700 dark:text-gray-200">{item}</span>
                </li>
            ))
        }
    </ul>
</div>

<style>
    /* Menambahkan custom width untuk card yang lebih lebar */
    @media (min-width: 640px) {
        .max-w-lg {
            max-width: 32rem !important; /* 512px */
        }
    }
    
    @media (min-width: 1024px) {
        .max-w-lg {
            max-width: 36rem !important; /* 576px */
        }
    }
    
    /* Efek hover yang lebih halus */
    .shadow-lg {
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .hover\:shadow-xl:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
</style>